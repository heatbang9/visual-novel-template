<?xml version="1.0" encoding="UTF-8"?>
<scene name="school_romance_opening" localization_key="school_romance.opening.title">
    
    <!-- 오프닝 BGM 시작 -->
    <action type="play_bgm" duration="2.0" wait="false">
        <parameters audio_path="res://games/school_romance/audio/bgm/morning_sunshine.ogg" 
                   fade_in="true" 
                   loop="true"/>
    </action>
    
    <!-- 배경: 아침 햇살이 비치는 주택가 -->
    <background type="image" 
                path="res://games/school_romance/backgrounds/residential_morning.png" 
                transition="fade_from_black" 
                duration="3.0"/>
    
    <!-- 화면 효과: 부드러운 아침 분위기 -->
    <action type="screen_effect" duration="2.0" wait="false">
        <parameters effect="soft_glow" intensity="0.2"/>
    </action>
    
    <!-- 나레이션: 게임 시작 -->
    <message speaker="narrator" typewriter_speed="20">
        봄이 찾아온 4월, 새 학기가 시작되었습니다.
        <translation lang="en">April has arrived with spring, and a new semester begins.</translation>
        <translation lang="ja">春が訪れた4月、新学期が始まりました。</translation>
    </message>
    
    <!-- 플레이어 등장 -->
    <character id="player" name="주인공" default_position="center" 
               entry_animation="fade_in" scale="1.0">
        <portrait emotion="normal" path="res://games/school_romance/characters/player/normal.png"/>
        <portrait emotion="excited" path="res://games/school_romance/characters/player/excited.png"/>
        <portrait emotion="nervous" path="res://games/school_romance/characters/player/nervous.png"/>
        <portrait emotion="determined" path="res://games/school_romance/characters/player/determined.png"/>
        <voice pitch="0.9" speed="1.0" volume="1.0"/>
    </character>
    
    <!-- 플레이어 등장 애니메이션 -->
    <action type="character_enter" target="player" duration="1.5" wait="true">
        <parameters animation="fade_in" position="center"/>
    </action>
    
    <message speaker="player" emotion="excited">
        드디어 고등학교 2학년이 되었다! 새로운 반에서는 어떤 친구들을 만날까?
    </message>
    
    <!-- 회상 씬 - 배경 변경 -->
    <action type="screen_effect" duration="1.0" wait="true">
        <parameters effect="fade_white"/>
    </action>
    
    <background type="image" 
                path="res://games/school_romance/backgrounds/bedroom_morning.png" 
                transition="fade" 
                duration="2.0"/>
    
    <message speaker="narrator" typewriter_speed="25">
        작년에는 새 환경에 적응하느라 바빴지만, 올해는 뭔가 특별한 일이 일어날 것만 같은 예감이 듭니다.
    </message>
    
    <!-- 거울 앞에서 준비하는 모습 -->
    <action type="play_sfx" wait="false">
        <parameters audio_path="res://games/school_romance/audio/sfx/morning_routine.ogg" volume="0.6"/>
    </action>
    
    <message speaker="player" emotion="determined">
        좋아, 오늘부터 새로운 마음가짐으로 학교생활을 시작해보자!
    </message>
    
    <!-- 어머니의 목소리 (오프스크린) -->
    <message speaker="mother" voice_file="res://games/school_romance/audio/voice/mother/breakfast_call.ogg">
        얘야, 아침 다 됐어! 빨리 와서 먹어!
    </message>
    
    <message speaker="player" emotion="excited">
        네, 지금 가요!
    </message>
    
    <!-- 아침 식사 장면으로 전환 -->
    <action type="screen_effect" duration="0.5" wait="true">
        <parameters effect="fade_black"/>
    </action>
    
    <background type="image" 
                path="res://games/school_romance/backgrounds/kitchen_morning.png" 
                transition="fade_from_black" 
                duration="1.5"/>
    
    <!-- 어머니 캐릭터 등장 -->
    <character id="mother" name="어머니" default_position="left" 
               entry_animation="fade_in" scale="0.95">
        <portrait emotion="caring" path="res://games/school_romance/characters/mother/caring.png"/>
        <portrait emotion="worried" path="res://games/school_romance/characters/mother/worried.png"/>
        <voice pitch="1.1" speed="0.9" volume="0.9"/>
    </character>
    
    <action type="character_enter" target="mother" duration="1.0" wait="true">
        <parameters animation="fade_in" position="left"/>
    </action>
    
    <!-- 아침 식사 대화 -->
    <message speaker="mother" emotion="caring">
        오늘은 새 학기 첫날이네. 설레지?
    </message>
    
    <message speaker="player" emotion="excited">
        네! 새로운 반 친구들을 만날 생각하니까 정말 기대돼요.
    </message>
    
    <message speaker="mother" emotion="worried">
        친구들과 잘 어울리길 바라고... 혹시 특별한 누군가를 만날지도 모르겠네?
    </message>
    
    <action type="change_emotion" target="player" duration="0.5" wait="true">
        <parameters emotion="nervous"/>
    </action>
    
    <message speaker="player" emotion="nervous">
        엄마, 그런 말씀은... 아직 그런 생각 안 해봤어요.
    </message>
    
    <message speaker="mother" emotion="caring">
        하하, 그럴 수도 있지. 어쨌든 좋은 하루 되길 바란다.
    </message>
    
    <!-- 식사 마무리 효과음 -->
    <action type="play_sfx" wait="false">
        <parameters audio_path="res://games/school_romance/audio/sfx/eating_finish.ogg" volume="0.5"/>
    </action>
    
    <message speaker="player" emotion="determined">
        잘 먹었습니다! 그럼 학교 가볼게요!
    </message>
    
    <!-- 어머니 퇴장 -->
    <action type="character_exit" target="mother" duration="1.0" wait="true">
        <parameters animation="fade_out"/>
    </action>
    
    <!-- 등교 준비 -->
    <action type="screen_effect" duration="1.0" wait="true">
        <parameters effect="fade_black"/>
    </action>
    
    <background type="image" 
                path="res://games/school_romance/backgrounds/house_entrance.png" 
                transition="fade_from_black" 
                duration="2.0"/>
    
    <!-- 등교길 BGM으로 변경 -->
    <action type="play_bgm" duration="3.0" wait="false">
        <parameters audio_path="res://games/school_romance/audio/bgm/walking_to_school.ogg" 
                   fade_in="true"/>
    </action>
    
    <message speaker="narrator" typewriter_speed="22">
        가방을 메고 집을 나선 주인공. 
        오늘부터 시작될 새로운 학교생활에 대한 설렘으로 발걸음이 가벼워집니다.
    </message>
    
    <!-- 등교길 풍경 -->
    <action type="character_move" target="player" duration="2.0" wait="true">
        <parameters to_position="right" animation="linear"/>
    </action>
    
    <message speaker="player" emotion="excited">
        날씨도 좋고, 기분도 좋고... 뭔가 특별한 일이 일어날 것만 같아!
    </message>
    
    <!-- 벚꽃 이펙트 -->
    <action type="play_sfx" wait="false">
        <parameters audio_path="res://games/school_romance/audio/sfx/cherry_blossom_wind.ogg" volume="0.4"/>
    </action>
    
    <message speaker="narrator">
        봄바람에 흩날리는 벚꽃잎들이 주인공의 앞길을 축복하는 듯합니다.
    </message>
    
    <!-- 학교가 보이기 시작 -->
    <action type="camera_zoom" target="camera" duration="2.0" wait="true">
        <parameters zoom_level="1.3" animation="ease_in_out"/>
    </action>
    
    <message speaker="player" emotion="determined">
        저기 학교가 보인다! 자, 새로운 시작이야!
    </message>
    
    <!-- 오프닝 마무리 -->
    <action type="screen_effect" duration="2.0" wait="true">
        <parameters effect="fade_white"/>
    </action>
    
    <!-- 타이틀 표시 효과 -->
    <action type="play_sfx" wait="false">
        <parameters audio_path="res://games/school_romance/audio/sfx/title_appear.ogg" volume="0.8"/>
    </action>
    
    <wait duration="3.0"/>
    
    <message speaker="narrator" typewriter_speed="15">
        『 학교 생활 로맨스 』
        <translation lang="en">『 School Life Romance 』</translation>
        <translation lang="ja">『 学校生活ロマンス 』</translation>
    </message>
    
    <wait duration="2.0"/>
    
    <!-- 다음 씬으로의 전환 준비 -->
    <action type="screen_effect" duration="1.5" wait="true">
        <parameters effect="fade_to_black"/>
    </action>
    
    <!-- BGM 페이드아웃 -->
    <action type="stop_bgm" duration="2.0" wait="false">
        <parameters fade_out="true"/>
    </action>
    
</scene>