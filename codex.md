# CODEX.md

## 프로젝트 진행 개요
- **엔진**: Godot 4.5
- **템플릿 목적**: 비주얼 노벨 제작을 위한 기본 구조 제공
- **핵심 시스템**:
  1. 캐릭터 객체 관리 및 상태 동기화
  2. XML 기반 씬 로딩 & 리소스 매핑
  3. Dialogic를 활용한 대화/선택지 흐름
  4. 테스트 주도 개발(TDD)로 기능 확장

## 지금 집중해야 할 작업
1. **캐릭터 관리 시스템 기초 구현**
   - 캐릭터 데이터를 객체로 분리하고 상태(감정, 포즈 등)를 노출할 API 정의
   - Dialogic 캐릭터 에디터와의 연결 포인트 설계
2. **XML 씬 데이터 파이프라인**
   - XML 파서 초안 작성 및 씬 로딩 시그널 연결
   - 씬 전환, 리소스 언로드/리로드 전략 수립
3. **테스트 골격 마련**
   - Godot 내장 테스트 러너를 활용한 기본 테스트 케이스 작성
   - 캐릭터 로드/씬 파싱에 대한 단위 테스트 추가
4. **메인 씬 정리**
   - `MainScene.tscn` 내 메뉴/게임 흐름을 템플릿 수준으로 정리
   - Dialogic 타임라인과의 상호작용 흐름 정의

## 개발 플로우
1. 테스트 케이스 작성 → 실패 확인
2. 기능 구현 및 리팩토링
3. `godot --run-tests`로 회귀 테스트 실행
4. 필요 시 에디터/런타임 실행으로 수동 검증
5. 변경 사항 커밋 및 PR 생성

## 테스트 & 실행 명령어
```bash
# 전체 테스트
godot --run-tests

# 특정 테스트
godot --run-tests TestName

# 프로젝트 실행
godot project.godot
```

## 빌드/에디터 참고
- Windows 에디터 경로: `C:\Users\kthgo\OneDrive\문서\Godot_v4.5-stable_mono_windows_arm64\...\Godot_v4.5-stable_mono_windows_arm64.exe`
- 자동 빌드 점검: PowerShell에서 Godot 실행 후 10초 뒤 종료 스크립트 활용

## 향후 계획
- Dialogic 타임라인 템플릿 정비 및 선택지 시스템 고도화
- XML-Dialogic 간 데이터 동기화를 위한 유틸리티 추가
- 리소스 밸리데이터 연동으로 배포 전 검증 자동화

## 브랜치 상태 메모
- `work` 브랜치에서 정리한 캐릭터/씬 로더 개선 사항을 `main`에 병합 완료.
- 테스트 실행 환경이 준비되면 `godot --run-tests`로 회귀 테스트를 수행해 최신 메인 상태를 검증해야 함.
- 현재 컨테이너에는 GitHub 원격이 등록되어 있지 않아 자동 푸시가 불가하므로, 로컬에서 최신 변경 사항을 올리려면 `git remote add origin <github-url>` 설정 후 `git push origin main`을 수동으로 실행해야 함.
